% !TeX spellcheck = es_ES
% !TeX program = xelatex
\documentclass[12pt,letterpaper,twoside]{book} % document class
\usepackage{titletoc}		% for table of contents at beginning of chapters
\usepackage{ucs} 				% in conjunction with inputenc, to write in UTF-8
\usepackage[spanish,es-nodecimaldot]{babel}	% language
\usepackage{csquotes}		% for specifying quotes
	\MakeOuterQuote{"}
\usepackage{fontspec} 		% for specifying fonts
\usepackage[T1]{fontenc} 	% font encoding

\usepackage[scale=0.89]{tgheros} % Helvetica is too big
\usepackage[osf]{Baskervaldx} % tosf in text, tlf in math
\usepackage[baskervaldx,cmintegrals,bigdelims,vvarbb]{newtxmath} % math italic letters from Baskervaldx
\usepackage[cal=boondoxo]{mathalfa} % mathcal from STIX, unslanted a bit
\renewcommand{\ttdefault}{cmtt}	% redefine default font for texttt shape
    %\usepackage{mathpazo}
    % \usepackage[oldstylenums,nosf,largesmallcaps]{kpfonts}		% no serif Kpfonts
    % \usepackage{classico}		% Classico font for serif shape
%\setsansfont{URWClassico}[
    %Path=./URWClassico/,
    %Extension = .otf,
    %UprightFont=*-Regular,
    %BoldFont=*-Bold,
    %ItalicFont=*-Italic,
    %BoldItalicFont=*-BoldItalic
    %]	
\usepackage{lettrine} 			% for capital letters at the start of the chapter
%\usepackage{amsmath} 		% no se usa con Baskervaldx
%\usepackage{amsfonts}
%\usepackage{amssymb}
\renewcommand{\labelitemi}{\textbullet}	% itemize with bullet instead of blacksquare
\usepackage{color}			% to use colors, mainly in hyperref and maintext
\usepackage{xcolor,colortbl}			% to define colors used for tables and titles
	\definecolor{orangy}{RGB}{255,122,4}
	\definecolor{blueish}{RGB}{4,122,255}
	\definecolor{aqua}{RGB}{0,100,150}
	\definecolor{deepblue}{RGB}{0,102,205}
	\definecolor{yellowish}{RGB}{255,255,0}
	\definecolor{chapopcolor}{RGB}{0,100,150}
\usepackage[explicit]{titlesec}		% for title formats
	%\titleformat{\chapter}[hang]{\sffamily\huge\bfseries\color{blueish}}{Capítulo \thechapter.}{0.5em}{}[]{#1.}
	\titleformat{name=\chapter,numberless}[hang]{}{}{0pt}{\sffamily\huge\bfseries\color{chapopcolor} #1}
	\titlespacing*{name=\chapter,numberless}{0pt}{0pt}{*10}     %% adjust 30 as per need
	\titleformat{name=\section}{}{}{0pt}{\sffamily\Large\bfseries\color{aqua} \thesection.  #1}
	\titleformat{name=\section,numberless}{}{}{0pt}{\sffamily\Large\bfseries\color{aqua}#1}
	\titleformat{name=\subsection}{}{}{0pt}{\sffamily\large\bfseries\color{blueish} \; \thesubsection. #1}
	\titleformat{name=\subsection,numberless}{}{}{0pt}{\sffamily\large\bfseries\color{blueish}#1}
	\titleformat{name=\subsubsection}{}{}{0pt}{\sffamily\normalsize\bfseries\color{aqua} \; \thesubsubsection. #1}
	\titleformat{name=\subsubsection,numberless}{}{}{0pt}{\sffamily\normalsize\bfseries\color{aqua}#1}
	\titleformat{name=\paragraph}[runin]{}{}{0pt}{\sffamily\normalsize\bfseries\color{chapopcolor}#1}
	\titlespacing*{name=\paragraph}{0pt}{1ex}{1ex}
\usepackage{wallpaper}		% for title pages
\usepackage{wrapfig}		% to wrap figures, used for "extra" boxes
\usepackage{amsthm}				
	\newtheorem{theorem}{Teorema}		% to define Teorema environment
	\newtheorem*{theoremun}{Teorema}
	\theoremstyle{plain}
	\renewcommand{\qedsymbol}{\textit{Q.E.D.}}
	\theoremstyle{remark}				% to define Convención environment
	\newtheorem{convention}{Convención}
	\newtheorem*{convention*}{Convención}
\usepackage[skip=0.4em,indent=1em]{parskip}	% produces the Paragraph Layout: Zero Parindent and non-zero Parskip. \parskip helps LaTeX in finding the best place for page breaks. the package adjusts the skips between list items.
	\renewcommand{\baselinestretch}{1.1}		% redefines space between lines
	% \setlength{\parskip}{0.2em}				% redefines space between paragraphs
	\raggedbottom 		% to allow ragged page bottoms, thus cut pages: All pages will not necessarily have exactly the same height, but ‘almost the same height’. The difference will be noticeable mainly if it happens in an even page and the following odd page
\usepackage{enotez}
	\setenotez{backref=true,reset = true,list-heading = \section*{#1}}
	\let\footnote=\endnote		% to use endnotes instead of footnotes
\usepackage{makeidx}					% to create index
	\makeindex
\usepackage{graphicx}					% builds upon the graphics package
	\graphicspath{ {images/} }
\usepackage{tikz}						% for tikz images
	\usetikzlibrary{babel}
	\usetikzlibrary{arrows.meta,calc,positioning,shapes,arrows,decorations.pathmorphing}
	\usetikzlibrary{cd}
\usepackage{pgfplots}
    \pgfplotsset{compat=1.17}
\usepackage[left=4cm,right=4cm,top=2.7cm,bottom=2.5cm,outer=3cm,inner=3cm,heightrounded]{geometry}	% defines margins of pages
\usepackage[breaklinks=true,
colorlinks=true,linkcolor=blue!22!black,urlcolor=blue,citecolor=black,anchorcolor=blue!70!black,
bookmarks=true,pdfpagelayout=TwoPageRight]{hyperref}		% for hyperlinks within 
\usepackage{tcolorbox}				% color boxes for Definición,Ejemplo,Ejercicios,Proyecto,Resumen
\usepackage{varwidth}				% used for "ejercicios" boxes: defines a variable-width minipage environment: analogous to minipage, but whose resulting width is the natural width of its contents.
	\tcbuselibrary{breakable,skins,theorems}
\usepackage{array}				% for arrays of equations
\usepackage{multicol}			% for many columns (used for definitions and perhaps "extra" tables)
\usepackage{multirow}			% for tables with many rows
\usepackage{longtable}			% for breakable tables
\usepackage{makecell}			% for cells inside cell
	\renewcommand\theadalign{bc}
	\renewcommand\theadfont{\bfseries}
	\renewcommand\theadgape{\Gape[4pt]}
	\renewcommand\cellgape{\Gape[4pt]}
\usepackage[type={CC},modifier={by-nc-sa},version={4.0},]{doclicense}	% for Creative Commons license



%%%%%% INICIO - FORMATO PART %%%%%% 
\titleformat{name=\part}{}{}{0pt}{
	\ThisCenterWallPaper{1.5}{wall/wall3}
	\tikz[overlay,remember picture]
	{  \fill[chapopcolor,opacity=0] ([yshift=7mm] current page.west) rectangle ([yshift=-23mm] current page.east); }
	{ \begin{tikzpicture}[overlay,remember picture]
		\node (part name) [anchor=north west, part name] at (current page.north west) {parte:}; %{\partname};
		\node [part number] {\thepart $^{\text{a}}$};
		\node (part text) [text width=\linewidth,align=center,part text, anchor=center] at (current page.center) {#1};
		\end{tikzpicture}		}	}
\titlespacing*{\part}{0pt}{0pt}{50mm}
\tikzset{
	part name/.style={%	% palabra "parte"
		xshift=50mm,
		yshift=-100mm,
		font=\sffamily\bfseries\Large\scshape,
		text=black,
		scale=1.5},
	part number/.style={%	% NUMERO DE PARTE
		left=2pt of part name,
		font=\sffamily\bfseries\Large,
		black,
		scale=1.5		},
	part text/.style={%	% TÍTULO DE PART
		fill=white,
		opacity=0.3,
		text=black,
		text opacity=1,
		font=\Huge\bfseries\sffamily\scshape,
		%		inner ysep=12pt,
		%		inner xsep=20pt,
		%		xshift=-20mm,
		yshift=-5mm,
		scale=1.5 	},	}
%%%%%% FIN - FORMATO PART%%%%%% 

%%%%%% INICIO - FORMATO CHAPTER OPENER %%%%%% 
\newcommand\chapterillustration{}
\titleformat{\chapter}{}{}{0pt}{
	\ThisCenterWallPaper{1.5}{\chapterillustration}
	\tikz[overlay,remember picture]
	{		\fill[chapopcolor,opacity=0] ([yshift=7mm] current page.west) rectangle ([yshift=-23mm] current page.east);		% CINTA AZUL
		%	\fill[chapopcolor,opacity=0.5] ([yshift=-15mm] current page.west) rectangle (current page.south east);		% CUADRO BLANCO
	}
	{		\begin{tikzpicture}[overlay,remember picture]
		\node (chapter name) [anchor=north west, chapter name] at (current page.north west) {capítulo}; %{\chaptername};
		\node [chapter number] {\fbox{\thechapter}};
		\node (chapter text) [text width=\linewidth,align=center,chapter text, anchor=center] at (current page.center) {#1};
		\end{tikzpicture}	} 	}
\titlespacing*{\chapter}{0pt}{0pt}{88mm}
\tikzset{
	chapter name/.style={%	% palabra "chapter"
		xshift=25mm,
		yshift=-20mm,
		font=\sffamily\bfseries\Huge,
		text=white,
		scale=1},
	chapter number/.style={%	% NUMERO DEL CAPÍTULO
		below=2pt of chapter name,
		font=\sffamily\bfseries\Huge,
		white,
		scale=2.5
	},
	chapter text/.style={%	% TÍTULO DEL CAPÍTULO
		fill=white,%chapopcolor!80,
		opacity=0.7,
		text=chapopcolor,
		text opacity=1,
		font=\huge\bfseries\sffamily,
		%		inner ysep=12pt,
		%		inner xsep=20pt,
		%		xshift=-20mm,
		yshift=50mm,
		scale=1.5	}, 	}
%%%%%% FIN - FORMATO Capítulo %%%%%% 

%%%%%% BEGIN - TABLE OF CONTENTS FORMAT %%%%%%
\contentsmargin{0cm}%
%%%% PART IN TOC
\titlecontents{part}[0pt]{\Large\sffamily\bfseries\protect\addvspace{10pt}%
\begin{tikzpicture}[remember picture, overlay]
\draw[fill=blue!16!black,draw=blue!22!black] (0,-0.15) -- (19,-0.15);
\end{tikzpicture}}%
{}{ }%		HERE GOES THE "PART" WORD
{ }%\begin{tikzpicture}[remember picture, overlay] \draw[fill=blue!22!black,draw=blue!22!black] (2pt,0) rectangle (10,0.1pt); \end{tikzpicture}}%		HERE GOES THE PAGE
%%%% CHAPTER IN TOC
\titlecontents{chapter}[0pc]
{\addvspace{10pt}%
	\begin{tikzpicture}[remember picture, overlay]%
	\draw[rounded corners,fill=blueish!18,draw=blueish!18] (-4,-.2) rectangle (-0.15,.5);%
	\pgftext[center,x=-1cm,y=0.15cm]{\color{blue!22!black}\huge\sffamily\bfseries\thecontentslabel};%
	\end{tikzpicture}\large\sc\sffamily\bfseries}%
{}
{}
{ \dotfill \large\sc\sffamily\bfseries \thecontentspage}%
%{\;\;\;\large\sc\sffamily\bfseries \thecontentspage}%
%%%% SECTION IN TOC
\titlecontents{section}[2.4pc]
{\addvspace{1pt}}
{ } %{\contentslabel[\thecontentslabel]{2.4pc}}
{}
{\; \small \thecontentspage}
[]
%%%% SUBSECTION IN TOC
\titlecontents*{subsection}[4pc]
{\itshape\addvspace{-1pt}\footnotesize}
{}
{}
{  \footnotesize\thecontentspage}
[ \textbullet\ ][]
\makeatletter
\renewcommand{\tableofcontents}{%
	\chapter*{%
		\vspace*{-20\p@}%
		\begin{tikzpicture}[remember picture, overlay]%
		\pgftext[right,x=15cm,y=0.2cm]{\color{chapopcolor}\Huge\sc\bfseries\sffamily Índice}% \contentsname};%
		\end{tikzpicture}}%
	\@starttoc{toc}}
\makeatother
%%%%%% END - TABLE OF CONTENTS FORMAT %%%%%%

% for "contenido y objetivos" boxes
\newtcolorbox{inicio}[1][]%
{enhanced jigsaw,center,colframe=blue!50!black!50!white,colback=white,opacityback=0.7,drop fuzzy shadow=blue!50!black!60!white,boxrule=0.4pt}

% for "definición" boxes
\newtcbtheorem[]{definition}{Definición}%
{breakable,center,colback=white,colframe=deepblue,colbacktitle=aqua!30,coltitle=black,fontupper=\sffamily,fonttitle=\sffamily,width=0.85\linewidth}{Def}

% for "ejercicios" boxes
\newtcbtheorem[]{ejercicio}{Ejercicio \#}%
{breakable,colback=white,enhanced,frame empty,interior empty,colframe=red,coltitle=red,fonttitle=\sffamily\bfseries\large,colbacktitle=white,borderline={0.5mm}{0mm}{red},borderline={0.5mm}{0mm}{white,dashed},attach boxed title to top center={yshift=-1.5mm},boxed title style={boxrule=0.5pt},varwidth boxed title,before upper={\parindent15pt},fontupper=\sffamily}{ejerc}

% for "extra" boxes
\newtcolorbox{extra}[1][]{enhanced,size=small,colframe=blueish,width=\linewidth,before skip=0.1cm,
interior style={top color=blue!5,bottom color=white},fontupper=\small}%,pad at break=1mm,break at=3cm/6.3cm}

% for the project at the end of the chaper
\newtcolorbox{proyecto}[1][]%
{enhanced,breakable,colframe=white,interior style={top color=blue!10,bottom color=white},before skip=2cm,before upper={\parindent15pt}}

% for resumen at the end of each chapter
\newtcolorbox{resumen}[1][]%
{enhanced,center,colframe=blue!50!black!50!white,colback=white,coltitle=deepblue,after skip=2cm,fonttitle=\sffamily\bfseries,drop fuzzy shadow northwest=blue!50!black!50!white,boxrule=0.4pt}

% for "ejemplo" boxes
\tcbset{theo/.style={enhanced,breakable,box align=base,sharp corners=all,
toprule=1pt,rightrule=1pt,bottomrule=1pt,leftrule=20pt,width=\linewidth,colback=white,colframe=orangy,coltitle=white,beforeafter skip=0.5cm,fontupper=\sffamily,detach title,overlay unbroken and first ={\node[rotate=90, minimum width=1.5cm, anchor=south, font=\sffamily\bfseries\Large\centering, yshift=-23pt] at (frame.west) {\tcbtitle};}}}
\newtcbtheorem[auto counter]{ejemplo}{ejemplo}{theo=blueish}{ejem}

%%%%% DEFINITION OF SYMBOLS
	\makeatletter					% defines "models" symbol right-to-left
\providecommand*{\Dashv}{\mathrel{\mathpalette\@Dashv\vDash}}
\newcommand*{\@Dashv}[2]{\reflectbox{$\m@th#1#2$}}
	\makeatother
\newcommand*\circled[1]{\tikz[baseline=(char.base)]{\node[shape=circle,draw,inner sep=1.5pt] (char) {#1};}}			% defines circled characters
\newcommand*\elip[1]{\tikz[baseline=(char.base)]{\node[shape=rectangle,draw,rounded corners,inner sep=2.2pt] (char) {#1};}}			% defines circled characters
\def\doubleunderline#1{\underline{\underline{#1}}} 	% double underline for equivalence rules
\def\OMG{\;\&\;}			% for spaced ampersand
\let\Y\OMG
%%%%% DEFINITION OF SYMBOLS

%\renewcommand*\contentsname{Índice}

\author{\href{mailto:ckronosz@gmail.com}{Carlos Romero}}
\title{Lógica Básica: Una introducción al arte del razonamiento}


%		\includeonly{capitulos/parte2-LC0}


\begin{document}
\frontmatter

\begin{titlepage}
\newgeometry{left=7.5cm,top=1.2cm,right=1cm} %defines the geometry for the titlepage
%\pagecolor[rgb]{0.74, 0.83, 0.9}
%\ThisCenterWallPaper{1.5}{wall/wall8}
\begin{tikzpicture}[remember picture, overlay]
\node[opacity=1,inner sep=0pt] at (current page.center)
{\includegraphics[width=\paperwidth,height=\paperheight]{wall/wall45b}};
\end{tikzpicture}
%\includegraphics[width=2cm]{logo.jpg}\\[-1em]
%\color{white}
\vphantom{A}
\vfill
\noindent{\fontsize{70}{48} \selectfont \bfseries\sffamily lógica básica.}
\\{\fontsize{20}{48} \selectfont \bfseries\sffamily una introducción al arte del razonamiento}
%{\fontsize{20}{48} \selectfont \bfseries\sffamily \qquad\qquad\quad\quad arte del razonamiento}
\par
\noindent
\makebox[0pt][l]{\rule{1.3\textwidth}{1pt}}
\par
\noindent
{\large\sffamily \href{mailto:ckronosz@gmail.com}{\bfseries Carlos Romero}} %\textbf{\textsf{unam}}}
\par
\vskip\baselineskip
\noindent \textsf{(versión parcial de \today.)}
\end{titlepage}
\restoregeometry % restores the geometry
\pagecolor{white}
\pagestyle{plain}


\tableofcontents

\bigskip
\bigskip
\bigskip
\bigskip
\bigskip
\bigskip


\doclicenseThis


\include{capitulos/parte0-prefacio}


\mainmatter


\part{Fundamentos del Análisis Lógico del Discurso}
 \include{capitulos/parte1-fundamentos}


\part{Lógica Clásica de Orden Cero}
 \include{capitulos/parte2-LC0}


\part{Lógica Clásica de Primer Orden con Identidad}
 \include{capitulos/parte4-LC1}


\part{Lógica informal y probabilística}
 \input{capitulos/parte3-informal}


\backmatter


\part*{Apéndices}
\include{capitulos/parteZ1-apendices}


%\cleardoublepage
\addcontentsline{toc}{chapter}{Índice analítico}
\renewcommand\indexname{Índice analítico}
\printindex


\include{capitulos/parteZ2-bibliografia}
\end{document}